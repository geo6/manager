<thead>
    <tr>
        <th colspan="{{ table.columns | length }}">
            <code>{{ table.name }}</code>
        </th>
        {% for foreign in foreignTables %}
        <th colspan="{{ foreign.columns | length }}">
            <code>{{ foreign.name }}</code>
        </th>
        {% endfor %}
    </tr>
    <tr>
        {% for column in columns %}

        {% set columnName = table.name ~ '.' ~ column.name %}

        {% set colspan = 1 %}
        {% if thematic.column == column.name %}
        {% set colspan = 2 %}
        {% elseif column.config.preview == true or column.config.download == true %}
        {% set colspan = 2 %}
        {% endif %}

        <th scope="col" colspan="{{ colspan }}">
            <a href="{{ path('table', {'config': configId, 'offset': 0}) }}?sort={{ columnName }}&amp;order={{ sort == columnName and order == 'asc' ? 'desc' : 'asc' }}"
                class="d-flex justify-content-between align-items-center">
                <span class="text-nowrap">
                    {{ thematic.column == column.name ? '<i class="fas fa-palette"></i>' }}
                    {{ column.isForeignKey == true ? '<i class="fas fa-link"></i>' }}
                    {{ column.config.preview == true or column.config.download == true ? '<i class="fas fa-file"></i>' }}
                    {{ column.name }}
                </span>
                {% if sort == columnName and order == 'asc' %}
                <i class="fas fa-sort-up"></i>
                {% elseif sort == columnName and order == 'desc' %}
                <i class="fas fa-sort-down"></i>
                {% else %}
                <i class="fas fa-sort"></i>
                {% endif %}
            </a>
        </th>
        {% endfor %}

        {% for foreign in foreignTables %}

        {% set fselectColumns = foreign.getSelectColumns() %}
        {% set fcolumns = foreign.columns | filter(c => c.name in fselectColumns) %}

        {% for fcolumn in fcolumns %}

        {% set colspan = 1 %}
        {% if fcolumn.config.preview == true or fcolumn.config.download == true %}
        {% set colspan = 2 %}
        {% endif %}

        <th scope="col" colspan="{{ colspan }}">
            {% set columnName = foreign.name ~ '.' ~ fcolumn.name %}
            <a href="{{ path('table', {'config': configId, 'offset': 0}) }}?sort={{ columnName }}&amp;order={{ sort == columnName and order == 'asc' ? 'desc' : 'asc' }}"
                class="d-flex justify-content-between align-items-center">
                <span class="text-nowrap">
                    {{ fcolumn.config.preview == true or fcolumn.config.download == true ? '<i class="fas fa-file"></i>' }}
                    {{ fcolumn.name }}
                </span>
                {% if sort == columnName and order == 'asc' %}
                <i class="fas fa-sort-up"></i>
                {% elseif sort == columnName and order == 'desc' %}
                <i class="fas fa-sort-down"></i>
                {% else %}
                <i class="fas fa-sort"></i>
                {% endif %}
            </a>
        </th>

        {% endfor %}

        {% endfor %}
    </tr>
</thead>