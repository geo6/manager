{% extends '@layout/default.html.twig' %}

{% block title %}Map{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('/map.css') }}">
{% endblock %}

{% block javascript %}
    <script>
        window.custom = {{ config | json_encode | raw }};
    </script>
    <script src="{{ asset('/map.js') }}"></script>
{% endblock %}

{% block links %}
    <li class="nav-item">
        <a href="{{ path('table', {'config': config}) }}" class="nav-link">
            <i class="fas fa-table"></i>
            Table
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link disabled" href="#modal-filter">
            <i class="fas fa-filter"></i>
            Filter
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link disabled" href="#modal-thematic">
            <i class="fas fa-palette"></i>
            Thematic
        </a>
    </li>
    <li class="nav-item dropdown">
        <a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button">
            <i class="fas fa-file-download"></i>
            Export
        </a>
        <div class="dropdown-menu">
            <a class="dropdown-item disabled" href="{{ path('export', {'config': config, 'format':'geojson'}) }}">
                <i class="far fa-file-code"></i>
                GeoJSON
            </a>
            <a class="dropdown-item disabled" href="{{ path('export', {'config': config, 'format':'kml'}) }}">
                <i class="far fa-file-code"></i>
                KML
            </a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item disabled" href="{{ path('export', {'config': config, 'format':'csv'}) }}">
                <i class="fas fa-file-csv"></i>
                CSV
            </a>
            <a class="dropdown-item disabled" href="{{ path('export', {'config': config, 'format':'csv'}) }}">
                <i class="far fa-file-excel"></i>
                Excel
            </a>
        </div>
    </li>
{% endblock %}

{% block content %}
    <main>
        <div class="sidebar collapsed" id="sidebar">
            <div class="sidebar-tabs">
                <ul role="tablist">
                    <li>
                        <a href="#baselayers" role="tab" title="Baselayers">
                            <i class="far fa-map"></i>
                        </a>
                    </li>
                    <li class="disabled">
                        <a href="#info" role="tab" title="Info">
                            <i class="fas fa-info-circle"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#geocoder" role="tab" title="Geocode">
                            <i class="fas fa-map-marker-alt"></i>
                        </a>
                    </li>
                </ul>

                <ul role="tablist">
                    <li>
                        <a href="#about" role="tab">
                            <i class="far fa-question-circle"></i>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="sidebar-content">
                {{ include('@app/partial/sidebar/baselayers.html.twig') }}
                {{ include('@app/partial/sidebar/info.html.twig') }}
                {{ include('@app/partial/sidebar/geocoder.html.twig') }}
                {{ include('@app/partial/sidebar/about.html.twig') }}
            </div>
        </div>
        <div id="map" class="sidebar-map"></div>
    </main>
{% endblock %}
